<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Plone 4-3 Alpha 1 In Production &mdash; Alex Clark&#39;s Blog</title>
    
    <link rel="stylesheet" href="../../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="top" title="Alex Clark&#39;s Blog" href="../../../../" />
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  
  <link rel="alternate" type="application/atom+xml"  href="../../../../blog/atom.xml" title="Alex Clark's Blog">
  
  
  <link href="True" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../../">
          Alex Clark&#39;s Blog</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://aclark.net">Home</a></li>
                <li><a href="https://www.facebook.com/aclark4life">Facebook</a></li>
                <li><a href="https://github.com/aclark4life">GitHub</a></li>
                <li><a href="https://gratipay.com/aclark4life">Gratipay</a></li>
                <li><a href="https://www.linkedin.com/in/aclark4life">LinkedIn</a></li>
                <li><a href="https://twitter.com/aclark4life">Twitter</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../../">Pages <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../now/">What I&#8217;m doing now</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../feeds/">Feeds</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    Oct 03, 2012
  
  </h2>

  <ul>
    

  

  

  

  
  <li><i class="fa-fw fa fa-folder-open"></i>
    
      
      <a href="../../../../blog/category/plone/">Plone</a>
      
    </li>
  

  
  
  <li>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'aclark-blog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/2012/10/03/plone-4-3-alpha-1-in-production/index/"> </a>
  </li>
  
  </ul>



  <h3><a href="../../../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../../../../2016/11/23/project-makefile-open-business/">Nov 23 - Project Makefile Open for Business</a></li>
    
      <li><a href="../../../../2016/04/03/yup-this-blog-is-now-powered-by-ablog/">Apr 03 - Yup, this blog is now powered by ABlog</a></li>
    
      <li><a href="../../../../2016/02/21/updated-django-website/">Feb 21 - Updated Django Website</a></li>
    
      <li><a href="../../../../2015/10/10/plock-0-5-0-is-out/">Oct 10 - Plock 0-5-0 is out</a></li>
    
      <li><a href="../../../../2015/10/07/dc-python-jobs/">Oct 07 - DC Python Jobs</a></li>
    
  </ul>

  <h3><a href="../../../../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../../../../blog/category/buildout/">Buildout (33)</a></li>
    
  
    
    <li><a href="../../../../blog/category/django/">Django (5)</a></li>
    
  
    
    <li><a href="../../../../blog/category/misc/">Misc (22)</a></li>
    
  
    
    <li><a href="../../../../blog/category/mozilla/">Mozilla (2)</a></li>
    
  
    
    <li><a href="../../../../blog/category/music/">Music (1)</a></li>
    
  
    
    <li><a href="../../../../blog/category/pillow/">Pillow (16)</a></li>
    
  
    
    <li><a href="../../../../blog/category/plone/">Plone (79)</a></li>
    
  
    
    <li><a href="../../../../blog/category/pyramid/">Pyramid (6)</a></li>
    
  
    
    <li><a href="../../../../blog/category/python/">Python (62)</a></li>
    
  
    
    <li><a href="../../../../blog/category/zope/">Zope (6)</a></li>
    
  
  </ul>

  <h3><a href="../../../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../../../blog/2016/">2016 (3)</a></li>
    
  
    
    <li><a href="../../../../blog/2015/">2015 (13)</a></li>
    
  
    
    <li><a href="../../../../blog/2014/">2014 (11)</a></li>
    
  
    
    <li><a href="../../../../blog/2013/">2013 (21)</a></li>
    
  
    
    <li><a href="../../../../blog/2012/">2012 (35)</a></li>
    
  
    
    <li><a href="../../../../blog/2011/">2011 (26)</a></li>
    
  
    
    <li><a href="../../../../blog/2010/">2010 (9)</a></li>
    
  
    
    <li><a href="../../../../blog/2009/">2009 (7)</a></li>
    
  
    
    <li><a href="../../../../blog/2008/">2008 (19)</a></li>
    
  
    
    <li><a href="../../../../blog/2007/">2007 (8)</a></li>
    
  
  </ul>

<form action="../../../../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="plone-4-3-alpha-1-in-production">
<h1>Plone 4-3 Alpha 1 In Production<a class="headerlink" href="#plone-4-3-alpha-1-in-production" title="Permalink to this headline">¶</a></h1>
<p><strong>I love upgrading Plone. Given the choice between an afternoon in the sun and upgrading Plone… OK I&#8217;d probably pick the sun, but it&#8217;d be close.</strong></p>
<div class="section" id="always-upgrading">
<h2>Always upgrading?<a class="headerlink" href="#always-upgrading" title="Permalink to this headline">¶</a></h2>
<p>I would love to see the trend of continuous integration make its way all the way to deployment, so that one day our Plone sites are getting new code as soon as it&#8217;s released. Until then, it&#8217;s nice to know that Plone&#8217;s upgrade procedure is fairly predictable and stable, if not entirely straightforward <a class="footnote-reference" href="#id4" id="id1">[1]</a>.</p>
</div>
<div class="section" id="how-do-i-upgrade">
<h2>How do I upgrade?<a class="headerlink" href="#how-do-i-upgrade" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately we <em>still</em> get asked this question in IRC. The TLDR (short) explanation is as follows. Got an old Plone? Here&#8217;s what you should do:</p>
<ul class="simple">
<li>Don&#8217;t touch it! Leave it alone. It&#8217;s probably doing something important.</li>
<li>Install the latest Plone somewhere that is not the location of your current site. Maybe not even on the same machine.</li>
<li>Copy the production Data.fs file (usually in var/ somewhere) and any blobs you may have (Plone 4 or greater) to the new installation.</li>
<li>Restart Plone in the foreground (bin/instance fg). If it starts, great! If it doesn&#8217;t, look for missing add-ons and add their newest-Plone counterparts (this is usually where all the real work happens). Can&#8217;t find the latest version? Try contacting the author. Stuck? Try Plone support (<a class="reference external" href="http://plone.org/support">http://plone.org/support</a>) or hire a consultant (e.g. <a class="reference external" href="http://aclark.net">http://aclark.net</a>). Otherwise, continue.</li>
<li>Once your add-ons are in place, start the site in the foreground and give the ZMI a poke (stay out of Plone). Look for broken objects. If you find some, repeat the previous step. Otherwise, continue.</li>
<li>Once the ZMI looks good, trigger the migration with the Dry Run checkbox selected. See what you get. If it completes, do it for real. If it doesn&#8217;t, open a ticket on <a class="reference external" href="http://dev.plone.org">http://dev.plone.org</a> so we can track the kinds of issues that folks are encountering in the wild. At this point if you are stuck, try to get help from the support forums (<a class="reference external" href="http://plone.org/support">http://plone.org/support</a>) or hire a consultant (e.g. <a class="reference external" href="http://aclark.net">http://aclark.net</a>). Otherwise, you are almost done!</li>
<li>Run the upgrade for real i.e. with the Dry Run checkbox unselected. When it finishes (it could take a while depending on the size of your site) check Plone. If everything looks OK, rejoice! If not, don&#8217;t worry. Check: <code class="docutils literal"><span class="pre">Site</span> <span class="pre">Setup</span> <span class="pre">-&gt;</span> <span class="pre">ZMI</span> <span class="pre">-&gt;</span> <span class="pre">portal_skins</span> <span class="pre">-&gt;</span> <span class="pre">custom</span></code>. If there is anything inside the custom folder, rename the custom folder to <code class="docutils literal"><span class="pre">custom_X_X</span></code> where <code class="docutils literal"><span class="pre">X_X</span></code> equals the previous Plone version e.g. <code class="docutils literal"><span class="pre">custom_3_3</span></code>. Or, rename it to whatever you like. Or delete it if you don&#8217;t care about any in-database customizations that have been made. You probably should care, but maybe you don&#8217;t. Now check Plone again. If everything looks OK, you are done! If not… well you really should be done by now. So if not, please email me: <a class="reference external" href="mailto:aclark&#37;&#52;&#48;aclark&#46;net">aclark<span>&#64;</span>aclark<span>&#46;</span>net</a> and I will try to help.</li>
</ul>
<p>That&#8217;s still a lot to swallow for a summary. The key point is this: <strong>test the upgrade away from the production site. Don&#8217;t put yourself in an unpleasant situation you can easily avoid</strong>. Once everything works as expected, make a copy of your Data.fs and perform the upgrade on the production site (by editing the buildout.cfg if you know how, or just make the new Plone installation the production site. Need help? Please feel free to email me: <a class="reference external" href="mailto:aclark&#37;&#52;&#48;aclark&#46;net">aclark<span>&#64;</span>aclark<span>&#46;</span>net</a> to discuss professional assistance.)</p>
</div>
<div class="section" id="how-did-i-upgrade">
<h2>How did I upgrade?<a class="headerlink" href="#how-did-i-upgrade" title="Permalink to this headline">¶</a></h2>
<p>Anyway, the point of this blog entry is to cover the recent upgrade of <a class="reference external" href="http://aclark.net">http://aclark.net</a> to Plone 4.3a1, and the bliss that ensued. Plone 4.3 has lots of goodness in it, most notably the new theme editor from Martin Aspeli. Whilst I haven&#8217;t fully explored its possibilites, I definitely liked seeing it in place; it&#8217;s an impressive piece of work and I suspect will be very useful to lots of folks. So here is a brief summary of my upgrade steps, which took about 2-3 days.</p>
<div class="section" id="create-a-new-empty-repo">
<h3>Create a new empty repo<a class="headerlink" href="#create-a-new-empty-repo" title="Permalink to this headline">¶</a></h3>
<p>I started with a public repo in my personal GitHub account, then forked it to my organization for showcasing:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/ACLARKNET/new_style">https://github.com/ACLARKNET/new_style</a></li>
</ul>
</div>
<div class="section" id="add-the-buildout">
<h3>Add the buildout<a class="headerlink" href="#add-the-buildout" title="Permalink to this headline">¶</a></h3>
<p>Yes, we are still married to Buildout for even the simplest deployments :-/. So in order to make this easy for myself and others, I maintain buildouts for every version of Plone under the <a class="reference external" href="http://pythonpackages.com">http://pythonpackages.com</a> umbrella. I typically start like this from within the checked out repo:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ virtualenv .
$ bin/pip install zc.buildout
$ bin/buildout init
</pre></div>
</div>
<p>I then <code class="docutils literal"><span class="pre">extend</span></code> the desired base configuration (<code class="docutils literal"><span class="pre">4.3.x-dev</span></code> in this case) and add additional customizations as needed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[buildout]
extends = http://pythonpackages.com/buildout/plone/4.3.x-dev

[plone]
eggs +=
    z3c.jbot
    ZODB3
scripts = ZODB3
resources = ${buildout:directory}/resources
zcml-additional =
# XXX Can this be done with p.r.zope2instance yet?
    &lt;configure
        xmlns:browser=&quot;http://namespaces.zope.org/browser&quot;
        &gt;
        &lt;include package=&quot;z3c.jbot&quot; file=&quot;meta.zcml&quot; /&gt;
        &lt;browser:jbot directory=&quot;${buildout:directory}/templates&quot; /&gt;
    &lt;/configure&gt;

[versions]
Cheetah = 2.2.1
Pillow = 1.7.7
Products.DocFinderTab = 1.0.5
Products.FSDump = 0.9.5
collective.recipe.supervisor = 0.17
gdata = 2.0.17
meld3 = 0.6.9
plone.app.debugtoolbar = 1.0a2
supervisor = 3.0b1
z3c.jbot = 0.7.1
zope2-bootstrap = 0.0.7
</pre></div>
</div>
</div>
<div class="section" id="develop-the-diazo-theme">
<h3>Develop the Diazo theme<a class="headerlink" href="#develop-the-diazo-theme" title="Permalink to this headline">¶</a></h3>
<p>With Diazo, Python packaging is optional. And the <code class="docutils literal"><span class="pre">resources</span></code> parameter available from <code class="docutils literal"><span class="pre">plone.recipe.zope2instance</span></code> makes it easy to start theming without a Python package. I started with a bootstrap template:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;Bootstrap, from Twitter&lt;/title&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;

    &lt;!-- Le styles --&gt;
    &lt;link href=&quot;/++theme++static/css/bootstrap.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&quot;/++theme++static/css/new_style.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&#39;http://fonts.googleapis.com/css?family=Oswald&#39; rel=&#39;stylesheet&#39; type=&#39;text/css&#39;&gt;
    &lt;style type=&quot;text/css&quot;&gt;
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    &lt;/style&gt;

    &lt;!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --&gt;
    &lt;!--[if lt IE 9]&gt;
      &lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;
    &lt;![endif]--&gt;

    &lt;!-- Le fav and touch icons --&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;/++theme++static/img/favicon.ico&quot;&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;144x144&quot; href=&quot;/++theme++static/ico/apple-touch-icon-144-precomposed.png&quot;&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;114x114&quot; href=&quot;/++theme++static/ico/apple-touch-icon-114-precomposed.png&quot;&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;72x72&quot; href=&quot;/++theme++static/ico/apple-touch-icon-72-precomposed.png&quot;&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; href=&quot;/++theme++static/ico/apple-touch-icon-57-precomposed.png&quot;&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;

      var _gaq = _gaq || [];
      _gaq.push([&#39;_setAccount&#39;, &#39;UA-35125830-1&#39;]);
      _gaq.push([&#39;_trackPageview&#39;]);

      (function() {
        var ga = document.createElement(&#39;script&#39;); ga.type = &#39;text/javascript&#39;; ga.async = true;
        ga.src = (&#39;https:&#39; == document.location.protocol ? &#39;https://ssl&#39; : &#39;http://www&#39;) + &#39;.google-analytics.com/ga.js&#39;;
        var s = document.getElementsByTagName(&#39;script&#39;)[0]; s.parentNode.insertBefore(ga, s);
      })();

    &lt;/script&gt;
  &lt;/head&gt;

  &lt;body&gt;

    &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;
      &lt;div class=&quot;navbar-inner&quot;&gt;
        &lt;div class=&quot;container&quot;&gt;
          &lt;a class=&quot;btn btn-navbar&quot; data-toggle=&quot;collapse&quot; data-target=&quot;.nav-collapse&quot;&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
          &lt;/a&gt;
          &lt;a class=&quot;brand&quot; href=&quot;#&quot;&gt;Project name&lt;/a&gt;
          &lt;div class=&quot;nav-collapse collapse&quot;&gt;
            &lt;ul class=&quot;nav&quot;&gt;
              &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#contact&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;
              &lt;li class=&quot;dropdown&quot;&gt;
                &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;Dropdown &lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;&lt;/a&gt;
                &lt;ul class=&quot;dropdown-menu&quot;&gt;
                  &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt;
                  &lt;li class=&quot;divider&quot;&gt;&lt;/li&gt;
                  &lt;li class=&quot;nav-header&quot;&gt;Nav header&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=&quot;container&quot;&gt;

      &lt;!-- Main hero unit for a primary marketing message or call to action --&gt;
      &lt;div class=&quot;hero-unit&quot;&gt;
        &lt;h1&gt;Hello, world!&lt;/h1&gt;
        &lt;p&gt;This is a template for a simple marketing or informational website.
            It includes a large callout called the hero unit and three supporting pieces of content.
            Use it as a starting point to create something more unique.&lt;/p&gt;
        &lt;p&gt;&lt;a class=&quot;btn btn-primary btn-large&quot;&gt;Learn more &amp;raquo;&lt;/a&gt;&lt;/p&gt;
      &lt;/div&gt;

      &lt;!-- Example row of columns --&gt;
      &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;span6 col1&quot;&gt;
          &lt;h2&gt;Heading&lt;/h2&gt;
          &lt;p&gt;Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo,
            tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada
            magna mollis euismod. Donec sed odio dui. &lt;/p&gt;
          &lt;p&gt;&lt;a class=&quot;btn&quot; href=&quot;#&quot;&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;span6 col2&quot;&gt;
          &lt;h2&gt;Heading&lt;/h2&gt;
          &lt;p&gt;Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor
            mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis
            euismod. Donec sed odio dui. &lt;/p&gt;
          &lt;p&gt;&lt;a class=&quot;btn&quot; href=&quot;#&quot;&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;
       &lt;/div&gt;

      &lt;hr&gt;

      &lt;footer&gt;
        &lt;p&gt;&amp;copy; Company 2012&lt;/p&gt;
      &lt;/footer&gt;

    &lt;/div&gt; &lt;!-- /container --&gt;

    &lt;!-- Le javascript
    ================================================== --&gt;
    &lt;!-- Placed at the end of the document so the pages load faster --&gt;
    &lt;script src=&quot;/++theme++static/js/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/++theme++static/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;http://platform.twitter.com/widgets.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        $(document).ready(function() {
            $(&#39;a.lightbox&#39;).lightBox();
            $(&quot;.client&quot;).collapse()
            $(&#39;.carousel&#39;).carousel({
                interval: 10000,
            }
            )
        });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p>Then added some Diazo rules:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;rules
    xmlns=&quot;http://namespaces.plone.org/diazo&quot;
    xmlns:css=&quot;http://namespaces.plone.org/diazo/css&quot;
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

    &lt;append css:content=&quot;#category&quot; css:theme=&quot;.hero-unit&quot; /&gt;
    &lt;before content=&#39;/html/head/title&#39; theme=&#39;/html/head/title&#39; /&gt;
    &lt;theme href=&quot;index.html&quot; /&gt;
    &lt;replace css:content=&quot;.nav&quot; css:theme=&quot;.nav&quot; /&gt;
    &lt;replace css:content=&quot;#content&quot; css:theme-children=&quot;.hero-unit&quot; /&gt;
    &lt;replace css:content=&quot;#portal-column-one&quot; css:theme-children=&quot;.col1&quot; /&gt;
    &lt;replace css:content=&quot;#portal-column-two&quot; css:theme-children=&quot;.col2&quot; /&gt;
    &lt;replace css:content=&quot;footer&quot; css:theme=&quot;footer&quot; /&gt;
    &lt;replace css:content=&quot;#portal-logo&quot; css:theme=&quot;.brand&quot; /&gt;

&lt;/rules&gt;
</pre></div>
</div>
<p>Then styled to fit with CSS:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>#about {
    padding-top: 9px;
}
.alex {
    border-bottom: 1px solid #FAFAFA;
}
body {
    background: url(&quot;/++theme++static/img/aclark-net-background.png&quot;) repeat-x;
    background-color: black;
}
.brand {
    color: #FAFAFA !important;
    font-family: Georgia;
}
.brand .alpha {
    font-size: 360%;
    font-style: italic;
}
.brand .name {
    font-size: 50px;
}
.carousel-inner {
    border-bottom: 1px solid #CCC;
    padding-bottom: 2em;
}
#content {
    color: #FAFAFA;
}
.description {
    font-size: 125%;
    margin: 1em 0 1em 0;
}
.documentDescription {
    font-size: 125%;
    margin: 1em 0 1em 0;
}
dt {
    margin: 1em 0 1em 0;
}
#facebook {
    padding-top: 1px;
}
footer {
    border-top: 1px solid #999999;
    color: #999999;
    margin-top: 600px;
    width: 100%;
    padding-top: 1em;
}
footer li {
    list-style-type: none;
}
.hero-unit {
    background: black;
}
hr {
    border: none;
    background-color: #CCC;
    color: #CCC;
    height: 1px;
}
.image-left {
    float: left;
    margin: 0 1em 0 0;
}
.navbar-inner {
    background: #AA001F !important;
    height: 50px;
}
.portletHeader {
    font-size: 125%;
}
#portal-column-one {
    color: #FAFAFA;
}
#portal-column-two {
    color: #FAFAFA;
}
.team-member {
    border-bottom: 1px solid #FAFAFA;
}
.service {
    padding: 30px 0 30px 0;
}
#twitter {
    padding-top: 15px;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="customize-templates">
<h2>Customize templates<a class="headerlink" href="#customize-templates" title="Permalink to this headline">¶</a></h2>
<p>As you may have noticed above I use <code class="docutils literal"><span class="pre">z3c.jbot</span></code> to customize various Plone templates.</p>
<img alt="alternate text" class="img-thumbnail align-center" src="../../../../_images/custom-templates.png" />
</div>
<div class="section" id="add-content">
<h2>Add content<a class="headerlink" href="#add-content" title="Permalink to this headline">¶</a></h2>
<p>I then cut/pasted all my content from the old site to the new site. This is a lot of work, but I like mimicking the experience of someone non-tech-savvy using Plone for the first time.</p>
</div>
<div class="section" id="what-s-left">
<h2>What&#8217;s left?<a class="headerlink" href="#what-s-left" title="Permalink to this headline">¶</a></h2>
<p>I am very happy with this upgrade, but of course it&#8217;s not perfect.</p>
<div class="section" id="use-sunburst-theme-for-content-editing">
<h3>Use Sunburst theme for content editing<a class="headerlink" href="#use-sunburst-theme-for-content-editing" title="Permalink to this headline">¶</a></h3>
<p>If you are Diazo-savvy, you may notice I completely ignore styling the content editing interface. Instead I rely on the unthemed <a class="footnote-reference" href="#id5" id="id2">[2]</a> site for content editing.</p>
<img alt="alternate text" src="../../../../_images/edit-ui.png" />
</div>
<div class="section" id="use-diazo-theme-for-public-facing-view">
<h3>Use Diazo theme for public facing view<a class="headerlink" href="#use-diazo-theme-for-public-facing-view" title="Permalink to this headline">¶</a></h3>
<p>Of course, visitors to <a class="reference external" href="http://aclark.net">http://aclark.net</a> see the Diazo theme.</p>
<img alt="alternate text" src="../../../../_images/diazo-theme.png" />
<p>I&#8217;m hoping that the Plone team can unify the content editing experience again in Plone 5, possibly via simplifying the &#8220;old style&#8221; templates such that it&#8217;s easier to map them to custom Diazo themes.</p>
</div>
</div>
<div class="section" id="hightlights">
<h2>Hightlights<a class="headerlink" href="#hightlights" title="Permalink to this headline">¶</a></h2>
<p>Lastly, I&#8217;ll cover some of the remaining highlights.</p>
<div class="section" id="it-works">
<h3>It works!<a class="headerlink" href="#it-works" title="Permalink to this headline">¶</a></h3>
<p>Plone 4.3a1 is remarkably stable. The TinyMCE UI is a bit rough, and the sitemap is broken <a class="footnote-reference" href="#id6" id="id3">[3]</a>, but it works.</p>
</div>
<div class="section" id="the-all-content-view-is-awesome">
<h3>The <code class="docutils literal"><span class="pre">All</span> <span class="pre">content</span></code> view is awesome<a class="headerlink" href="#the-all-content-view-is-awesome" title="Permalink to this headline">¶</a></h3>
<img alt="alternate text" src="../../../../_images/all-content.png" />
<p>Contributed by Laurence Rowe for Plone 4, I use the <code class="docutils literal"><span class="pre">All</span> <span class="pre">content</span></code> view in two places:</p>
<ul class="simple">
<li><a class="reference external" href="http://aclark.net/services">http://aclark.net/services</a></li>
<li><a class="reference external" href="http://aclark.net/team">http://aclark.net/team</a></li>
</ul>
<p>I love the ability to easily aggregate the contents of pages within a folder.</p>
</div>
<div class="section" id="my-deployment-is-awesome">
<h3>My deployment is awesome<a class="headerlink" href="#my-deployment-is-awesome" title="Permalink to this headline">¶</a></h3>
<p>I&#8217;m really happy with the following trick I used this time around:</p>
<ul class="simple">
<li>Content is stored in Data.fs (of course) which I&#8217;ve checked into a private repo on bitbucket, and save nightly with an automated commit and push. I&#8217;m able to present the site buildout and theme to the public but keep the Data.fs private via git submodules.</li>
</ul>
<p>Prior to this, the entire site was stored in a private repo on bitbucket. And finally:</p>
<ul class="simple">
<li>If you load the site, you&#8217;ll notice the images (configured as static resources) are a bit laggy. I&#8217;m a big fan of of CloudFlare and current user via pythonpackages.com, so I&#8217;ll probably be configuring aclark.net to use it soon too. Once that is done, the site should be lightning fast instead of just really fast.</li>
</ul>
<p>Like this article and/or my open source work in general? Please <a class="reference external" href="http://gittip.com/aclark4life">consider supporting me on gittip</a>.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Some ideas for improving upgrades: 1.) optionally rename portal_skins/custom during the upgrade process. 2.) Include suggestions in the form copy to stage the upgrade away from the current production site. 3.) Report on availability of add-ons compatible with latest version of Plone.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Unthemed meaning un-diazo-themed. The content UI is themed with the Sunburst theme &#8220;the old way&#8221;.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><a class="reference external" href="https://dev.plone.org/ticket/13178">https://dev.plone.org/ticket/13178</a></td></tr>
</tbody>
</table>
</div>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../../../09/28/pythonpackages-com-one-year-later/">
    <i class="fa fa-arrow-circle-left"></i>
    PythonPackages: One Year Later
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../../04/looking-for-projects/">
    Looking For Projects
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'aclark-blog';
        var disqus_identifier = '/2012/10/03/plone-4-3-alpha-1-in-production/';
        var disqus_title = 'Plone 4-3 Alpha 1 In Production';
        var disqus_url = 'http://blog.aclark.net/2012/10/03/plone-4-3-alpha-1-in-production/';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Alex Clark.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>